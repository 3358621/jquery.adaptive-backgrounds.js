/*! Brian Gonzalez by jquery.adaptive-background.js 14-12-2013 */
!function(a){var b="data-ab-color",c="data-ab-parent",d="ab-color-found",e={selector:'img[data-adaptive-background="1"]',parent:null},f=function(a){var b=document.createElement("a");return b.href=a,!(b.hostname===location.hostname&&b.protocol===location.protocol&&b.port===location.port)};!function(a){var b=function(){return document.createElement("canvas").getContext("2d")},c=function(a){var c=new Image;c.src=a.src;var d=b();d.drawImage(a,0,0);var e=d.getImageData(0,0,a.width,a.height);return e.data},d=function(a){return["rgb(",a,")"].join("")},e=function(a){return a.map(function(a){return d(a.name)})},f=5,g=10,h={};h.colors=function(a){for(var b=c(a),h=b.length,i=0,j=-(f-1),k={},l="",m=[],n={dominant:{name:"",count:0},palette:Array.apply(null,Array(g)).map(Boolean).map(function(){return{name:"0,0,0",count:0}})};(j+=4*f)<h;)if(++i,m[0]=b[j],m[1]=b[j+1],m[2]=b[j+2],l=m.join(","),k[l]=l in k?k[l]+1:1,"0,0,0"!==l){var o=k[l];o>n.dominant.count?(n.dominant.name=l,n.dominant.count=o):n.palette.some(function(a){return o>a.count?(a.name=l,a.count=o,!0):void 0})}return{dominant:d(n.dominant.name),palette:e(n.palette)}},a.RGBaster=a.RGBaster||h}(window),a.adaptiveBackground={run:function(g){var h=a.extend({},e,g);a(h.selector).each(function(){var e=a(this);if(f(e.attr("src")))return console.log("Not processing remote image: "+e.attr("src")),void 0;var g=function(){var a=RGBaster.colors(e[0]);e.attr(b,a.dominant),e.trigger(d,{color:a.dominant,palette:a.palette})};e.on(d,function(a,b){var d;d=e.attr(c)?e.parents(e.attr(c)):h.parent?e.parents(h.parent):e.parent(),d.css({backgroundColor:b.color})}),e[0].complete?g():e.load(g)})}}}(jQuery);